<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>CFB Simulator</title>
  <style>
    body { background:#111; color:white; font-family:'Vast XL Black', sans-serif; }
    #scoreboard { font-size:28px; margin:10px 0; }
    #plays { height:200px; overflow-y:auto; border:1px solid #555; padding:5px; background:#222; }
    #winBar { display:flex; height:20px; margin:5px 0; border:1px solid #444; }
    #barTeam1 { background:#006400; height:100%; width:50%; }
    #barTeam2 { background:#8B0000; height:100%; width:50%; }
    select, button, input { margin:5px; }
  </style>
</head>
<body>
<h1>College Football Simulator</h1>

<div>
  <label for="team1">Team 1:</label>
  <select id="team1"></select>
  <label for="team2">Team 2:</label>
  <select id="team2"></select>
  <button onclick="startGame()">Start Game</button>
  <button onclick="pauseGame()">Pause</button>
  <button onclick="resumeGame()">Resume</button>
  <button onclick="resetGame()">Reset</button>
</div>

<div id="scoreboard">No Game Selected</div>
<div id="winBar"><div id="barTeam1"></div><div id="barTeam2"></div></div>
<div id="odds">Win Probability: --</div>

<!-- Force Win -->
<div>
  <label>Force Win:</label>
  <select id="forceWinTeam"></select>
  <button onclick="forceWin()">Apply</button>
</div>

<div id="plays"></div>

<!-- Speed Slider -->
<div>
  <label for="speed">Speed:</label>
  <input type="range" id="speed" min="1" max="10" value="5">
</div>

<!-- Settings -->
<h2>Settings</h2>
<label for="fontSelector">Choose Font:</label>
<select id="fontSelector" onchange="changeFont()">
  <option value="'Vast XL Black', sans-serif">Vast XL Black</option>
  <option value="'ESPN Scoreboard', sans-serif">ESPN Scoreboard</option>
  <option value="Arial, sans-serif">Arial</option>
  <option value="Times New Roman, serif">Times New Roman</option>
</select>

<h2>History</h2>
<ul id="gameHistory"></ul>

<script>
/* ---------------- TEAM LIST ---------------- */
const teams=[
  "Alabama","Georgia","Michigan","Ohio State","Texas","USC","Clemson","Notre Dame",
  "Oklahoma","Florida State","LSU","Oregon","Penn State","Washington","Tennessee","Utah",
  "Florida","Wisconsin","Miami","Texas A&M","Iowa","Ole Miss","TCU","North Carolina"
];

teams.forEach(t=>{
  document.getElementById("team1").add(new Option(t,t));
  document.getElementById("team2").add(new Option(t,t));
  document.getElementById("forceWinTeam").add(new Option(t,t));
});

/* ---------------- VARIABLES ---------------- */
let score1=0,score2=0,team1="",team2="",quarter=1,timeRemaining=900; // 15 min qtrs
let paused=false,gameInterval=null,history=[],speed=5;
let forceWinTeam=null;

/* ---------------- GAME ---------------- */
function startGame(){
  resetGame();
  team1=document.getElementById("team1").value;
  team2=document.getElementById("team2").value;
  score1=0; score2=0; quarter=1; timeRemaining=900;
  document.getElementById("scoreboard").innerText=`${team1} vs ${team2}`;
  gameInterval=setInterval(simulatePlay,1000/Math.max(1,document.getElementById("speed").value));
}

function simulatePlay(){
  if(paused) return;
  timeRemaining-=Math.floor(Math.random()*40+20); // longer drives
  if(timeRemaining<=0){
    quarter++; timeRemaining=900;
    if(quarter>4){ endGame(); return; }
  }

  if(Math.random()<0.3){ // 30% chance drive ends in score
    let pts=0,roll=Math.random();
    if(roll<0.5) pts=7; // TD + XP
    else if(roll<0.8) pts=3; // FG
    else pts=0;
    if(Math.random()<0.5) score1+=pts; else score2+=pts;
    document.getElementById("plays").innerHTML+=`<p>Score! ${team1} ${score1} - ${team2} ${score2}</p>`;
  }
  updateScoreboard();
}

function endGame(){
  clearInterval(gameInterval);
  if(forceWinTeam){
    if(forceWinTeam===team1){ score1=Math.max(score1,score2+1); }
    else if(forceWinTeam===team2){ score2=Math.max(score2,score1+1); }
  }
  document.getElementById("plays").innerHTML+=`<p><b>FINAL: ${team1} ${score1} - ${team2} ${score2}</b></p>`;
  history.push({t1:team1,t2:team2,s1:score1,s2:score2});
  updateHistory();
}

function updateScoreboard(){
  document.getElementById("scoreboard").innerText=
    `${team1} ${score1} - ${team2} ${score2} | Q${quarter} ${formatTime()}`;
  let diff=score1-score2, prob=50+diff*2-(4-quarter)*2;
  if(prob<1) prob=1; if(prob>99) prob=99;
  document.getElementById("odds").innerText=`Win Probability: ${team1} ${prob}% | ${team2} ${100-prob}%`;
  document.getElementById("barTeam1").style.width=prob+"%";
  document.getElementById("barTeam2").style.width=(100-prob)+"%";
}

/* ---------------- CONTROLS ---------------- */
function pauseGame(){ paused=true; }
function resumeGame(){ paused=false; }
function resetGame(){
  clearInterval(gameInterval); paused=false; forceWinTeam=null;
  document.getElementById("plays").innerHTML="";
  document.getElementById("scoreboard").innerText="No Game Selected";
  document.getElementById("odds").innerText="";
  document.getElementById("barTeam1").style.width="50%";
  document.getElementById("barTeam2").style.width="50%";
}
function formatTime(){ let m=Math.floor(timeRemaining/60), s=timeRemaining%60; return `${m}:${s<10?"0":""}${s}`; }
function updateHistory(){
  const hist=document.getElementById("gameHistory"); hist.innerHTML="";
  history.forEach(h=>{ hist.innerHTML+=`<li>${h.t1} ${h.s1} - ${h.t2} ${h.s2}</li>`; });
}
function forceWin(){ forceWinTeam=document.getElementById("forceWinTeam").value; alert(forceWinTeam+" will be forced to win!"); }

/* ---------------- SETTINGS ---------------- */
function changeFont(){
  document.body.style.fontFamily=document.getElementById("fontSelector").value;
}
</script>
</body>
</html>
